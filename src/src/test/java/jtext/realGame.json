{
  "start": "bedroom",
  "start_text": "You wake up in your bed and open your eyes, but you can't see anything.",
  "locations": {
    "bedroom": {
      "visible": false,
      "adjacent": ["hallway"],
      "look": {"text": "The bedroom is where you sleep."},
      "objects": {
        "blanket": {
          "use": {
            "text": "You pulled off the blanket and are greeted by your legs.",
            "do": [
              {
                "type": "visible",
                "targets": ["legs"]
              }
            ]
          },
          "look": {"text": "A warm blanket"}
        },
        "light": {          
          "use": {
            "text": "Turned on the light",
            "do": [
              {
                "type": "visible",
                "targets": [
                  "bedroom",
                  "door",                  
                  "desk",
                  "wardrobe"
                ]
              }
            ]
          },
          "look": {"text": "A lamp on your night stand."}
        },
        "legs": {
          "visible": false,
          "use": {
            "text": "You get out of the bed.",
            "do": [
              {
                "type": "enable",
                "targets": ["desk", "drawer", "wardrobe", "door"]
              }
            ]
          },
          "look": {"text": "Your legs."}
        },
        "desk": {
          "visible": false,
          "enabled": false,
          "look": {
            "text": "There is a desk with a drawer.",
            "do": [
              {
                "type": "visible",
                "targets": ["drawer"]
              }
            ]
          }
        },
        "drawer": {
          "visible": false,
          "enabled": false,
          "look": {"text": "A drawer on the desk."},
          "use": {
            "text": "You opened the drawer. There is a key in it.",
            "do": [
              {
                "type": "visible",
                "targets": ["room_key"]
              }
            ]
          }
        },
        "room_key": {
          "visible": false,
          "look": {"text": "A small key."},
          "take": {
            "text": "You pick up the key.",
            "do": [{"type": "take"}]
          }
        },
        "wardrobe": {
          "visible": false,
          "enabled": false,
          "look": {"text": "A wardrobe with clothes in it."},
          "use": {
            "text": "You opened the wardrobe.",
            "do": [
              {
                "type": "visible",
                "targets": ["clothes"]
              }
            ]
          }
        },
        "clothes": {
          "visible": false,
          "look": {"text": "Your clothes: Pants and a shirt."},
          "take": {
            "text": "You put on your clothes.",
            "do": [{"type": "take"}]
          }
        },
        "door": {
          "visible": false,
          "enabled": false,
          "look": {"text": "The door of the bedroom."},
          "use": {"text": "The door is locked."},
          "use_with": {
            "item": "room_key",
            "text": "You opened the door.",
            "do": [
              {
                "type": "visible",
                "targets": ["hallway"]
              }
            ]
          }
        }
      }
    },
    "kitchen": {
      "adjacent": ["hallway"],
      "look": {"text": "The kitchen contains a counter and a fridge."},
      "objects": {
        "counter": {
          "look": {
            "text": "On the counter, you see a stove, a sink, a toaster and a bread box.",
            "do": [
              {
                "type": "visible",
                "targets": [
                  "stove",
                  "sink",
                  "bread box",
                  "toaster"
                ]
              }
            ]
          }
        },
        "stove": {
          "visible": false,
          "look": {"text": "There is no time to cook now."}
        },
        "sink": {
          "visible": false,
          "look": {"text": "The faucets are turned off."}
        },
        "bread box": {
          "visible": false,
          "look": {"text": "The bread box is closed."},
          "use": {
            "text": "You opened bread box. There is one slice of toast inside.",
            "do": [
              {
                "type": "visible",
                "targets": ["toast"]
              }
            ]
          }
        },
        "toast": {
          "visible": false,
          "look": {"text": "A slice of toast."},
          "take": {
            "text": "You pick up the slice of toast.",
            "do": [{"type": "take"}]
          }
        },
        "toaster": {
          "visible": false,
          "state": "empty",
          "look": {"text": "The toaster is turned off."},
          "use_with": {
            "item": "toast",
            "text": "You put the toast inside the toaster.",
            "do": [
              {
                "type": "state",
                "value": "loaded",
                "targets": ["toaster"]
              },
              {
                "type": "remove",
                "targets": ["toast"]
              }
            ]
          },
          "use": {
            "text": "You turned on the toaster. A toasted slice of toast and a key popped out of it.",
            "if": [
              {
                "type": "state",
                "targets": ["toaster"],
                "value": "loaded",
                "else": "There is nothing to toast inside the toaster."
              }
            ],
            "do": [
              {
                "type": "visible",
                "targets": ["apt_key"]
              },
              {
                "type": "state",
                "value": "empty",
                "targets": ["toaster"]
              }
            ]
          }
        },
        "apt_key": {
          "visible": false,
          "look": {"text": "The key to your apartment."},
          "take": {
            "text": "You picked up the apartment key",
            "do": [{"type": "take"}]
          }
        },
        "fridge": {
          "look": {"text": "The fridge makes a quiet buzzing noise."}
        }
      }
    },
    "hallway": {
      "visible": false,
      "adjacent": [
        "bedroom",
        "kitchen"
      ],
      "look": {"text": "The hallway connects the bedroom, the bathroom, and the exit."},
      "objects": {
        "key shelf": {
          "look": {"text": "A key shelf. Your apartment key is missing."}
        },
        "apartment_door": {
          "use_with": {
            "item": "apt_key",
            "if": [
              {
                "type": "item",
                "else": "You should put on some clothes first.",
                "items": ["clothes"]
              }
            ],
            "do": [{"type": "win"}]
          }
        }
      }
    }
  }
}